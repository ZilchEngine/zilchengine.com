<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Learning Objectives | ZilchEngine </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Learning Objectives | ZilchEngine ">
      
      <link rel="icon" href="../../../../favicon.ico">
      <link rel="stylesheet" href="../../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../../public/main.css">
      <meta name="docfx:navrel" content="../../../../toc.html">
      <meta name="docfx:tocrel" content="../../../toc.html">
      
      <meta name="docfx:rel" content="../../../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/ZilchEngine/ZilchEngineWebsite/blob/master/docs/zilch_editor_documentation/tutorials/gameplay/swept_character.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">
  </head>

  <script type="module" src="./../../../../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../../index.html">
            <img id="logo" class="svg" src="../../../../images/ZilchLogo.svg" alt="ZilchEngine">
            ZilchEngine
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">

<p>The <code>SAMPLECHARACTERCONTROLLERS[1.0]</code> package on the <a href="../external_zilch_engine_tools/the_market.html"> Zilch Market</a> contains 2D and 3D input scripts that work with the <code>SweptController</code> component also included in the package. The <code>SweptController</code> is a generic kinematic character controller that is useful when prototyping many 2D and 3D game concepts.</p>
<h1 id="learning-objectives">Learning Objectives</h1>
<ul>
<li>Character controller explanation</li>
<li>Kinematic vs Dynamic</li>
<li>SweptController usage</li>
</ul>
<h1 id="level-setup">Level Setup</h1>
<ul>
<li><p><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#newproject"> New Project</a></p>
</li>
<li><p>Create a new project using the {nav icon=clone, name=Empty 2D Project} template</p>
</li>
<li><p>Click  the market button in the top right of the editor window
<img src="https://raw.githubusercontent.com/ZilchEngine/ZilchFiles/master/doc_files/106205.png" alt="image"></p>
</li>
<li><p>Click  the <code>Sample Character Controller</code> package
<img src="https://raw.githubusercontent.com/ZilchEngine/ZilchFiles/master/doc_files/106207.png" alt="image"></p>
</li>
<li><p>Click  the download link for the <code>SAMPLECHARACTERCONTROLLERS[1.0].ZEROPACK</code>
<img src="https://raw.githubusercontent.com/ZilchEngine/ZilchFiles/master/doc_files/106209.png" alt="image"></p>
</li>
<li><p>Click  the Import button button
<img src="https://raw.githubusercontent.com/ZilchEngine/ZilchFiles/master/doc_files/106211.png" alt="image"></p>
</li>
<li><p>Close the <code>Market Browser</code></p>
</li>
<li><p><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#createcube"> CreateCube</a></p>
</li>
<li><p>In the <code>Properties Window</code></p>
</li>
<li><p>Under <a href="../../../code_reference/class_reference/transform.html"> Transform</a></p>
</li>
<li><p>Set Scale  to <code>[50,1,1]</code></p>
</li>
<li><p>Under <a href="../../../code_reference/class_reference/rigidbody.html"> RigidBody</a></p>
</li>
<li><p>Set DynamicState enum to <a href="../../../code_reference/enum_reference.html#rigidbodydynamicstate">Static</a></p>
</li>
<li><p>In the <code>Library Window</code></p>
</li>
<li><p>Under Archetype</p>
</li>
<li><p><code>Click and drag</code> {nav icon=wrench, name=SweptPlayer2_5D} into the <code>Level Window</code>
<img src="https://raw.githubusercontent.com/ZilchEngine/ZilchFiles/master/doc_files/106215.gif" alt="SweptArchetype"></p>
</li>
<li><p><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#playgame"> PlayGame</a></p>
</li>
<li><p>Move left with <code>A</code> and right with <code>D</code></p>
</li>
<li><p>Jump with <code>Space</code></p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/ZilchEngine/ZilchFiles/master/doc_files/106217.gif" alt="Swept2DMoving"></p>
<p><em>The Player object moving and jumping</em></p>
<ul>
<li><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#stopgame"> StopGame</a></li>
</ul>
<h1 id="sweptinput">SweptInput</h1>
<p>Let's take a look at the <code>SweptInput2D</code> component.</p>
<pre><code class="lang-name=SweptInput2D,">class SweptInput2D : NadaComponent
{
  [Dependency] var SweptController : SweptController;
  
  [Property] var LeftKey : Keys = Keys.A;
  [Property] var RightKey : Keys = Keys.D;
  [Property] var JumpKey : Keys = Keys.Space;
  
  function Initialize(init : CogInitializer)
  {
    Zilch.Connect(this.Space, Events.LogicUpdate, this.OnLogicUpdate);
  }

  function OnLogicUpdate(event : UpdateEvent)
  {
    var movement = Real3(0, 0, 0);
    
    // Check for left/right movment
    if(Zilch.Keyboard.KeyIsDown(this.LeftKey))
      movement.X = -1;
    if(Zilch.Keyboard.KeyIsDown(this.RightKey))
      movement.X = 1;
    
    if(Zilch.Keyboard.KeyIsPressed(this.JumpKey))
    {
      this.SweptController.Jump();
    }
    
    this.SweptController.Update(movement, event.Dt);
  }
}
</code></pre>
<p>Very similar to our dynamic character controller from the <a href="input1.html">first input tutorial</a>, we need to calculate a direction in which to move and whether the character should jump. Using the input properties, we can configure which inputs drive the <code>SweptController</code>.</p>
<p>The important line to note in <code>SweptInput2D</code> is <code>this.SweptController.Update(movement, event.Dt);</code>. <code>SweptController.Update</code> must be called every frame on which the character should be moving. This function handles much of the behavior of the SweptController and should always be called at the end of the input detection update function in order to apply any changes that were made to SweptController properties that frame.</p>
<h1 id="swept-controller-properties">Swept Controller Properties</h1>
<p>Because the SweptCharacter uses a <code>Kinematic</code> object, it must handle its own gravity behavior. The strength of this gravitational acceleration can be adjusted per object.</p>
<ul>
<li><p>In the <code>Properties Window</code> for Player object</p>
</li>
<li><p>Under <code>SweptController</code></p>
</li>
<li><p>Set Gravity  to <code>50</code></p>
</li>
<li><p><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#playgame"> PlayGame</a></p>
</li>
<li><p>Jump with <code>Space</code></p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/ZilchEngine/ZilchFiles/master/doc_files/99693.gif" alt="SweptGravity"></p>
<p>*The Player object jumping with increased Gravity *</p>
<p>Notice that the acceleration of gravity is now more powerful.</p>
<ul>
<li><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#stopgame"> StopGame</a></li>
</ul>
<p>The jump velocity is also adjustable.</p>
<ul>
<li><p>In the <code>Properties Window</code></p>
</li>
<li><p>Under <code>SweptController</code></p>
</li>
<li><p>Set JumpSpeed  to <code>25</code></p>
</li>
<li><p><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#playgame"> PlayGame</a></p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/ZilchEngine/ZilchFiles/master/doc_files/99695.gif" alt="SweptJumpSpeed"></p>
<p>*The Player object jumping with increased Gravity  and increased JumpSpeed *</p>
<ul>
<li><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#stopgame"> StopGame</a></li>
</ul>
<p>Using these values alongside MaxFallSpeed  allows you determine how fast your character rises and falls with each jump.</p>
<h2 id="in-air-control">In-Air Control</h2>
<p>When the swept character is in the air, it has slight control by default. The SweptController allows you to modify the strength of that control.</p>
<ul>
<li><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#playgame"> PlayGame</a></li>
<li>Jump and then move side to side while in the air</li>
</ul>
<p><img src="https://raw.githubusercontent.com/ZilchEngine/ZilchFiles/master/doc_files/103377.gif" alt="air_control_default"></p>
<p>*The Player object jumping and moving with default AirAcceleration *</p>
<ul>
<li><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#stopgame"> StopGame</a></li>
</ul>
<p>Now let's try increasing the air control.</p>
<ul>
<li><p>In the <code>Properties Window</code></p>
</li>
<li><p>Under <code>SweptController</code></p>
</li>
<li><p>Set AirAcceleration  to <code>25</code></p>
</li>
<li><p><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#playgame"> PlayGame</a></p>
</li>
<li><p>Jump and then move side to side while in the air</p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/ZilchEngine/ZilchFiles/master/doc_files/103379.gif" alt="air_control_High"></p>
<p>*The Player object jumping and moving with increased AirAcceleration *</p>
<ul>
<li><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#stopgame"> StopGame</a></li>
</ul>
<p>In addition to changing the rate of acceleration in the air, you can also modify the GroundAcceleration  to similarly affect the SweptCharacter's acceleration when not in the air.</p>
<h1 id="max-ground-slope">Max Ground Slope</h1>
<p>Something you may not have thought about yet is how the <code>SweptController</code> detects whether it is <em>on ground// or not. There are certain behaviors, such as jumping, that should only occur when the object is //on ground//. This //ground detection</em> is done through a technique called //swept collision//, which is too advanced to cover in this tutorial. The final step of ground detection, though, is to check the angle of the slope that the character is on. If the slope is too steep, the SweptController will cause the character to slide down it instead of being able to move up it.</p>
<ul>
<li><p><a href="../../zilchmanual/editor/editorcommands/selectobject.html">Select</a> : Cube object</p>
</li>
<li><p><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#duplicate">Duplicate</a></p>
</li>
<li><p>In the <code>Properties Window</code></p>
</li>
<li><p>Under <a href="../../../code_reference/class_reference/transform.html">Transform</a></p>
</li>
<li><p>Set Translation  to <code>[5,0,0]</code></p>
</li>
<li><p>Set Rotation  to <code>[0,0,25]</code></p>
</li>
<li><p><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#duplicate">Duplicate</a></p>
</li>
<li><p>In the <code>Properties Window</code></p>
</li>
<li><p>Under <a href="../../../code_reference/class_reference/transform.html">Transform</a></p>
</li>
<li><p>Set Translation  to <code>[-5,0,0]</code></p>
</li>
<li><p>Set Rotation  to <code>[0,0,-50]</code></p>
</li>
<li><p><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#playgame"> PlayGame</a></p>
</li>
<li><p>Attempt to move onto all 3 platforms</p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/ZilchEngine/ZilchFiles/master/doc_files/106219.gif" alt="ground_angle"></p>
<p>*Platforms both above and below the MaxGroundSlope *</p>
<p>Notice how the Player object object can move freely on the platform with a rotation of <code>[0,0,25]</code>, but when it attempts to move onto the platform with a rotation of <code>[0,0,-50]</code>, it slides off. This is due to the Z-Axis rotation of the lefthand platform having a greater magnitude than the MaxGroundSlope  of the Player object's SweptController.</p>
<ul>
<li><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#stopgame"> StopGame</a></li>
</ul>
<h1 id="swept-collision">Swept Collision</h1>
<p>Collision events were covered in <a href="../scripting/events.html#collision-events">the events tutorial</a>. Now let's take a look at how they interact with the SweptController.</p>
<ul>
<li><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../zilchmanual/editor/editorcommands/resourceadding.html"> Add Resource</a></li>
<li>Create a NadaScript resource using the Component template template and name it <code>CollisionDetector</code></li>
<li>Update the <code>CollisionDetector</code> script to the following:</li>
</ul>
<pre><code class="lang-lang=csharp,">class CollisionDetector : NadaComponent
{
  function Initialize(init : CogInitializer)
  {
    Zilch.Connect(this.Owner, Events.CollisionStarted, this.OnCollisionStarted);
  }

  function OnCollisionStarted(event : CollisionEvent)
  {
    Console.WriteLine(&quot;`this.Owner` collided with `event.OtherObject`&quot;);
  }
}
</code></pre>
<ul>
<li><a href="../../zilchmanual/editor/editorcommands/selectobject.html">Select</a> : Player object</li>
<li><a href="../../zilchmanual/editor/addremovecomponent.html"> Add Component</a> : <code>CollisionDetector</code></li>
<li><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#console"> Console</a></li>
<li><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#playgame"> PlayGame</a></li>
</ul>
<pre><code class="lang-name=Console">---------------- Begin Game ----------------
Loaded level 0.00s
Level 'Level' was loaded.
Loaded level 0.00s
----------------  End Game  ----------------
</code></pre>
<p>Notice how our print statement from the <code>CollisionDetector</code> component is not executed. This is due to the fact that no standard collision is actually occurring here. The SweptController moves the player by predicting collision based on input and then translating to the correct point to simulate collision resolution. The result is that the kinematic collider of the Player object never actually touches the static colliders of the platforms.</p>
<ul>
<li><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#stopgame"> StopGame</a></li>
<li>In the <code>Properties Window</code></li>
<li>Under <code>SweptController</code></li>
<li>Set ForwardEvents checkBox to <code>true</code></li>
</ul>
<p><img src="https://raw.githubusercontent.com/ZilchEngine/ZilchFiles/master/doc_files/105946.png" alt="image"></p>
<ul>
<li><a href="../../zilchmanual/editor/editorcommands/selectobject.html">Select</a> : Player object</li>
<li><a href="../../zilchmanual/editor/addremovecomponent.html"> Add Component</a> : <a href="../../../code_reference/class_reference/customcollisioneventtracker.html">customcollisioneventtracker</a></li>
</ul>
<p>The <a href="../../../code_reference/class_reference/customcollisioneventtracker.html">customcollisioneventtracker</a> detects circumstances where standard <a href="../../../code_reference/class_reference/collisionevent.html">CollisionEvents</a> would be sent out and dispatches them when a <a href="../../../code_reference/class_reference/collider.html">collider</a> component would be involved in a standard collision.</p>
<ul>
<li><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#playgame"> PlayGame</a></li>
</ul>
<pre><code class="lang-name=&quot;Console">---------------- Begin Game ----------------
Loaded level 0.00s
Level 'Level' was loaded.
Loaded level 0.00s
&lt;Cog 'Player' (SweptPlayer2D) [2035]&gt; collided with &lt;Cog 'Cube' [2034]&gt;
----------------  End Game  ----------------
</code></pre>
<p>Now we can detect and react to the <a href="../../../code_reference/class_reference/collisionevent.html">CollisionEvents</a> sent by the <a href="../../../code_reference/class_reference/customcollisioneventtracker.html">customcollisioneventtracker</a>.</p>
<ul>
<li><a href="../../zilchmanual/editor/editorcommands/commands.html"> Command</a> : <a href="../../../code_reference/command_reference.html#stopgame"> StopGame</a></li>
</ul>
<h1 id="related-materials">Related Materials</h1>
<h2 id="tutorials">Tutorials</h2>
<ul>
<li><a href="input1.html">input1</a></li>
<li><a href="../scripting/events.html#collision-events">#collision-events</a></li>
</ul>
<h2 id="manual">Manual</h2>
<ul>
<li><a href="../../zilchmanual/editor/editorcommands/commands.html">commands</a></li>
<li><a href="../../zilchmanual/editor/editorcommands/selectobject.html">selectobject</a></li>
</ul>
<h2 id="reference">Reference</h2>
<h3 id="commands">Commands</h3>
<ul>
<li><a href="../../../code_reference/command_reference.html#newproject"> NewProject</a></li>
<li><a href="../../../code_reference/command_reference.html#playgame"> PlayGame</a></li>
<li><a href="../../../code_reference/command_reference.html#stopgame"> StopGame</a></li>
<li><a href="../../../code_reference/command_reference.html#createcube"> CreateCube</a></li>
<li><a href="../../../code_reference/command_reference.html#duplicate"> Duplicate</a></li>
</ul>
<h3 id="classes">Classes</h3>
<ul>
<li><a href="../../../code_reference/class_reference/transform.html">transform</a></li>
<li><a href="../../../code_reference/class_reference/customcollisioneventtracker.html">customcollisioneventtracker</a></li>
</ul>
<h3 id="events">Events</h3>
<ul>
<li><a href="../../../code_reference/event_reference.html#collisionstarted"> CollisionStarted</a></li>
</ul>
<h3 id="enums">Enums</h3>
<ul>
<li><a href="../../../code_reference/enum_reference.html#rigidbodydynamicstate"> RigidBodyDynamicState.Static</a></li>
</ul>
<h2 id="tasks">Tasks</h2>
<ul>
<li>T1181</li>
</ul>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/ZilchEngine/ZilchEngineWebsite/blob/master/docs/zilch_editor_documentation/tutorials/gameplay/swept_character.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          ZilchEngine 2024
        </div>
      </div>
    </footer>
  </body>
</html>
